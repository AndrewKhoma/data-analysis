# Ð›Ð°Ð±Ð¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð½Ð° Ñ€Ð¾Ð±Ð¾Ñ‚Ð° â„–2

Ð Ð¾Ð·Ð³Ð»ÑÐ½ÐµÐ¼Ð¾ Ð²Ð±ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð² R Ð´Ð°Ñ‚Ð°ÑÐµÑ‚ Ñ‰Ð¾ Ð¼Ñ–ÑÑ‚Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ñ– Ð¿Ñ€Ð¾ Ð´Ð¾Ñ€Ð¾Ð¶Ð½Ñ– Ð²Ð¸Ð¿Ñ€Ð¾Ð±ÑƒÐ²Ð°Ð½Ð½Ñ Ñ€Ñ–Ð·Ð½Ð¸Ñ… Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ð¸Ñ… Ñƒ ÑÐ¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ… ÑˆÑ‚Ð°Ñ‚Ð°Ñ… Ð¼Ð°ÑˆÐ¸Ð½ Ð²Ð¸Ð¿ÑƒÑÐºÑƒ 70-Ð¸Ñ… Ñ€Ð¾ÐºÑ–Ð² Ð¼Ð¸Ð½ÑƒÐ»Ð¾Ð³Ð¾ ÑÑ‚Ð¾Ñ€Ñ–Ñ‡Ñ‡Ñ. 

ÐŸÑ€Ð¾Ð²ÐµÐ´ÐµÐ¼Ð¾ ÐºÐ¾Ñ€ÐµÐ»ÑÑ†Ñ–Ð¹Ð½Ð¸Ð¹ Ð°Ð½Ð°Ð»Ñ–Ð·, Ð´Ð»Ñ Ð½ÑŒÐ¾Ð³Ð¾ Ð½Ð°Ð¼ Ð·Ð½Ð°Ð´Ð¾Ð±Ð¸Ñ‚ÑŒÑÑ Ð½Ðµ Ð²Ð±ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð² R Ð¿Ð°ÐºÐµÑ‚ `corrplot`. Ð‘Ñ–Ð»ÑŒÑˆ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¼Ð°Ð½ÑƒÐ°Ð» Ð· Ð¹Ð¾Ð³Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½Ñ Ñ€Ð¾Ð·Ð¼Ñ–Ñ‰ÐµÐ½Ð¸Ð¹ Ð½Ð° Ð¼Ð¾Ñ”Ð¼Ñƒ Ð³Ñ–Ñ‚Ñ…Ð°Ð±Ñ– Ñ– Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹ Ð·Ð° [Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½ÑÐ¼](https://github.com/Sky-Nik/data-analysis/blob/master/labs/lab-2/corrplot.md).

Ð’Ð¶Ðµ Ð·Ð²Ð¸Ñ‡Ð½Ð¾ÑŽ ÐºÐ¾Ð¼Ð±Ñ–Ð½Ð°Ñ†Ñ–Ñ”ÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð²Ñ‚ÑÐ°Ð½Ð¾Ð²Ð¸Ð¼Ð¾ Ñ– Ð¿Ñ–Ð´Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ð¼Ð¾ Ñ†ÐµÐ¹ Ð¿Ð°ÐºÐµÑ‚:
```R
install.packages("corrplot")
library(corrplot)
```

ÐŸÐµÑ€ÐµÐ´ Ð°Ð½Ð°Ð»Ñ–Ð·Ð¾Ð¼ Ð¿Ð¾Ð³Ð»ÑÐ½ÐµÐ¼Ð¾ Ð½Ð° Ð´Ð°Ñ‚Ð°ÑÐµÑ‚ Ñ‰Ð¾Ð± ÐºÑ€Ð°Ñ‰Ðµ Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸ Ð¹Ð¾Ð³Ð¾ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ
```R
mtcars
```
                    |  mpg | cyl |  disp |  hp | drat |    wt |  qsec | vs | am | gear | carb
--------------------|------|-----|-------|-----|------|-------|-------|----|----|------|-----
Mazda RX4           | 21.0 |   6 | 160.0 | 110 | 3.90 | 2.620 | 16.46 |  0 |  1 |    4 |    4
Mazda RX4 Wag       | 21.0 |   6 | 160.0 | 110 | 3.90 | 2.875 | 17.02 |  0 |  1 |    4 |    4
Datsun 710          | 22.8 |   4 | 108.0 |  93 | 3.85 | 2.320 | 18.61 |  1 |  1 |    4 |    1
Hornet 4 Drive      | 21.4 |   6 | 258.0 | 110 | 3.08 | 3.215 | 19.44 |  1 |  0 |    3 |    1
Hornet Sportabout   | 18.7 |   8 | 360.0 | 175 | 3.15 | 3.440 | 17.02 |  0 |  0 |    3 |    2
Valiant             | 18.1 |   6 | 225.0 | 105 | 2.76 | 3.460 | 20.22 |  1 |  0 |    3 |    1
Duster 360          | 14.3 |   8 | 360.0 | 245 | 3.21 | 3.570 | 15.84 |  0 |  0 |    3 |    4
Merc 240D           | 24.4 |   4 | 146.7 |  62 | 3.69 | 3.190 | 20.00 |  1 |  0 |    4 |    2
Merc 230            | 22.8 |   4 | 140.8 |  95 | 3.92 | 3.150 | 22.90 |  1 |  0 |    4 |    2
Merc 280            | 19.2 |   6 | 167.6 | 123 | 3.92 | 3.440 | 18.30 |  1 |  0 |    4 |    4
Merc 280C           | 17.8 |   6 | 167.6 | 123 | 3.92 | 3.440 | 18.90 |  1 |  0 |    4 |    4
Merc 450SE          | 16.4 |   8 | 275.8 | 180 | 3.07 | 4.070 | 17.40 |  0 |  0 |    3 |    3
Merc 450SL          | 17.3 |   8 | 275.8 | 180 | 3.07 | 3.730 | 17.60 |  0 |  0 |    3 |    3
Merc 450SLC         | 15.2 |   8 | 275.8 | 180 | 3.07 | 3.780 | 18.00 |  0 |  0 |    3 |    3
Cadillac Fleetwood  | 10.4 |   8 | 472.0 | 205 | 2.93 | 5.250 | 17.98 |  0 |  0 |    3 |    4
Lincoln Continental | 10.4 |   8 | 460.0 | 215 | 3.00 | 5.424 | 17.82 |  0 |  0 |    3 |    4
Chrysler Imperial   | 14.7 |   8 | 440.0 | 230 | 3.23 | 5.345 | 17.42 |  0 |  0 |    3 |    4
Fiat 128            | 32.4 |   4 |  78.7 |  66 | 4.08 | 2.200 | 19.47 |  1 |  1 |    4 |    1
Honda Civic         | 30.4 |   4 |  75.7 |  52 | 4.93 | 1.615 | 18.52 |  1 |  1 |    4 |    2
Toyota Corolla      | 33.9 |   4 |  71.1 |  65 | 4.22 | 1.835 | 19.90 |  1 |  1 |    4 |    1
Toyota Corona       | 21.5 |   4 | 120.1 |  97 | 3.70 | 2.465 | 20.01 |  1 |  0 |    3 |    1
Dodge Challenger    | 15.5 |   8 | 318.0 | 150 | 2.76 | 3.520 | 16.87 |  0 |  0 |    3 |    2
AMC Javelin         | 15.2 |   8 | 304.0 | 150 | 3.15 | 3.435 | 17.30 |  0 |  0 |    3 |    2
Camaro Z28          | 13.3 |   8 | 350.0 | 245 | 3.73 | 3.840 | 15.41 |  0 |  0 |    3 |    4
Pontiac Firebird    | 19.2 |   8 | 400.0 | 175 | 3.08 | 3.845 | 17.05 |  0 |  0 |    3 |    2
Fiat X1-9           | 27.3 |   4 |  79.0 |  66 | 4.08 | 1.935 | 18.90 |  1 |  1 |    4 |    1
Porsche 914-2       | 26.0 |   4 | 120.3 |  91 | 4.43 | 2.140 | 16.70 |  0 |  1 |    5 |    2
Lotus Europa        | 30.4 |   4 |  95.1 | 113 | 3.77 | 1.513 | 16.90 |  1 |  1 |    5 |    2
Ford Pantera L      | 15.8 |   8 | 351.0 | 264 | 4.22 | 3.170 | 14.50 |  0 |  1 |    5 |    4
Ferrari Dino        | 19.7 |   6 | 145.0 | 175 | 3.62 | 2.770 | 15.50 |  0 |  1 |    5 |    6
Maserati Bora       | 15.0 |   8 | 301.0 | 335 | 3.54 | 3.570 | 14.60 |  0 |  1 |    5 |    8
Volvo 142E          | 21.4 |   4 | 121.0 | 109 | 4.11 | 2.780 | 18.60 |  1 |  1 |    4 |    2

ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ Ð¾Ð¿Ð¸Ñ Ð·Ð¼Ñ–Ð½Ð½Ð¸Ñ…:
* `mpg`: (Ð°Ð¼ÐµÑ€Ð¸ÐºÐ°Ð½ÑÑŒÐºÑ–) Ð¼Ð¸Ð»Ñ– Ñ…Ð¾Ð´Ñƒ Ð½Ð° Ð³Ð°Ð»Ð¾Ð½ Ð¿Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾;
* `cyl`: ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ñ†Ð¸Ð»Ñ„Ð½Ð´Ñ€Ñ–Ð² Ñƒ Ð¼Ð¾Ñ‚Ð¾Ñ€Ñ–;
* `disp`: Ð¾Ð±'Ñ”Ð¼ Ð´Ð²Ð¸Ð³ÑƒÐ½Ð°;
* `hp`: Ð¿Ð¾Ð²Ð½Ð° Ð¿Ð¾Ñ‚ÑƒÐ¶Ð½Ñ–ÑÑ‚ÑŒ (ÐºÑ–Ð½ÑÑŒÐºÐ¸Ñ… ÑÐ¸Ð»);
* `drat`: Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚Ð½Ðµ Ð²Ñ–Ð´Ð½Ð¾ÑˆÐµÐ½Ð½Ñ (Ð·Ð°Ð´Ð½ÑŒÐ¾Ñ— Ð²Ñ–ÑÑ–);
* `wt`: Ð²Ð°Ð³Ð° (Ñ‚Ð¸ÑÑÑ‡ Ñ„ÑƒÐ½Ñ‚Ñ–Ð²);
* `qsec`: Ñ‡Ð°Ñ Ð½Ð° Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¶ÐµÐ½Ð½Ñ Ñ‡Ð²ÐµÑ€Ñ‚Ñ– Ð¼Ð¸Ð»Ñ–;
* `vs`: ÐºÑƒÑ‚ Ñ€Ð¾Ð·Ð²Ð°Ð»Ñƒ Ñ†Ð¸Ð»Ñ–Ð½Ð´Ñ€Ñ–Ð², ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ñ–Ð°Ð»ÑŒÐ½Ð° Ð¾Ð·Ð½Ð°ÐºÐ° (0 ÑÐºÑ‰Ð¾ Ð´Ð²Ð¸Ð³ÑƒÐ½ V-Ð¿Ð¾Ð´Ñ–Ð½Ð¸Ð¹ Ñ– 1 ÑÐºÑ‰Ð¾ Ð¿Ñ€ÑÐ¼Ð¸Ð¹);
* `am`: ÐºÐ¾Ñ€Ð¾Ð±ÐºÐ° Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡ (0 = Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚, 1 = Ð¼ÐµÑ…Ð°Ð½Ñ–ÐºÐ°);
* `gear`: ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡;
* `carb`: ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ ÐºÐ°Ñ€Ð±ÑŽÑ€Ð°Ñ‚Ð¾Ñ€Ñ–Ð².

ÐÐ° Ð¿ÐµÑ€ÑˆÐ¸Ð¹ Ð¿Ð¾Ð³Ð»ÑÐ´ Ð·Ð´Ð°Ñ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ Ð²Ð°Ð³Ð° Ð¼Ð°Ñ” Ð±ÑƒÑ‚Ð¸ Ð¿Ñ€ÑÐ¼Ð¾ Ð¿Ñ€Ð¾Ð¿Ð¾Ñ€Ñ†Ñ–Ð¹Ð½Ð¾ÑŽ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ð½Ð½ÑŽ Ð¿Ð°Ð»Ð¸Ð²Ð°,Ð° Ð¾Ñ‚Ð¶Ðµ Ð¾Ð±ÐµÑ€Ð½ÐµÐ½Ð¾ Ð¿Ñ€Ð¾Ð¿Ð¾Ñ€Ñ†Ñ–Ð¹Ð½Ð¾ÑŽ Ñ…Ð¾Ð´Ñƒ Ð½Ð° Ð³Ð°Ð»Ð¾Ð½, Ð° Ñ‚Ð°ÐºÐ¾Ð¶ ÑˆÐ²Ð¸Ð´ÐºÐ¾ÑÑ‚Ñ– Ñ€Ð¾Ð·Ð³Ð¾Ð½Ñƒ (Ð° Ñ‚Ð¾Ð¼Ñƒ Ñ– Ñ‡Ð°ÑÑƒ Ð½Ð° Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¶ÐµÐ½Ð½Ñ Ñ‡Ð²ÐµÑ€Ñ‚Ñ– Ð¼Ð¸Ð»Ñ–), Ð°Ð»Ðµ Ð·Ð°Ð»ÐµÐ¶Ð½Ñ–ÑÑ‚ÑŒ Ð¼Ñ–Ð¶ ÐºÑƒÑ‚Ð¾Ð¼ Ñ€Ð¾Ð·Ð²Ð°Ð»Ñƒ Ñ†Ð¸Ð»Ñ–Ð½Ð´Ñ€Ñ–Ð² Ð° Ð¾Ð±'Ñ”Ð¼Ð¾Ð¼ Ð´Ð²Ð¸Ð³ÑƒÐ½Ð° Ð·Ð¾Ð²ÑÑ–Ð¼ Ð½Ðµ Ñ‚Ð°ÐºÐ¸Ð¹ Ð¾Ñ‡ÐµÐ²Ð¸Ð´Ð½Ð¸Ð¹, ÑÐº Ñ– Ð·Ð²'ÑÐ·Ð¾Ðº Ð¼Ñ–Ð¶ Ð±Ñ–Ð»ÑŒÑˆÑ–ÑÑ‚ÑŽ Ð²Ð¸Ñ‰ÐµÐ·Ð³Ð°Ð´Ð°Ð½Ð¸Ñ… Ð¿Ð¾ÐºÐ°Ð·Ð½Ð¸ÐºÑ–Ð², Ñ‚Ð¾Ð¼Ñƒ ÑÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ñ”Ð¼Ð¾ÑÑ Ð¿Ð¾Ñ‚ÑƒÐ¶Ð½Ñ–ÑˆÐ¸Ð¼Ð¸ Ð¼ÐµÑ‚Ð¾Ð´Ð°Ð¼Ð¸ Ð½Ñ–Ð¶ "Ð¼ÐµÑ‚Ð¾Ð´ Ð¿Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ð¾Ð³Ð»ÑÐ´Ñƒ".

Ð ÑÐ°Ð¼Ðµ, Ð·Ð½Ð°Ð¹Ð´ÐµÐ¼Ð¾ ÐºÐ¾Ñ€ÐµÐ»ÑÑ†Ñ–Ð¹Ð½Ñƒ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†ÑŽ Ñ†ÑŒÐ¾Ð³Ð¾ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ñƒ:
```R
M <- cor(mtcars)
```

Ð’Ð¸Ð²Ð¾Ð´Ð¸Ñ‚Ð¸ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†ÑŽ Ñ€Ð¾Ð·Ð¼Ñ–Ñ€Ñƒ 11 Ð½Ð° 11 Ñ– Ð²Ð³Ð»ÑÐ´Ð°Ñ‚Ð¸ÑÑ Ñƒ 121 Ñ‡Ð¸ÑÐ»Ð¾ (Ð½ÐµÑ…Ð°Ð¹ 11 Ð· Ð½Ð¸Ñ… Ñ– Ð´Ð¾Ñ€Ñ–Ð²Ð½ÑŽÑŽÑ‚ÑŒ Ð¾Ð´Ð¸Ð½Ð¸Ñ†Ñ– Ð° Ñ€ÐµÑˆÑ‚Ð° Ñ€Ð¾Ð·Ð±Ð¸Ð²Ð°ÑŽÑ‚ÑŒÑÑ Ð½Ð° 55 Ð¿Ð°Ñ€ Ñ€Ñ–Ð²Ð½Ð¸Ñ…) ÑÐºÐ¾ÑÑŒ Ð½Ðµ Ð´ÑƒÐ¶Ðµ Ñ…Ð¾Ñ‡ÐµÑ‚ÑŒÑÑ, Ñ‚Ð¾Ð¼Ñƒ ÑÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ñ”Ð¼Ð¾ÑÑ Ð¿Ð°ÐºÐµÑ‚Ð¾Ð¼ `corrplot`, Ñ– Ð¾Ð´Ñ€Ð°Ð·Ñƒ Ð²Ð¸Ð²ÐµÐ´ÐµÐ¼Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¸ Ñ‚ÐµÑÑ‚Ñƒ Ð½Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸Ñ‡Ð½Ñƒ Ð·Ð½Ð°Ñ‡ÑƒÑ‰Ñ–ÑÑ‚ÑŒ Ð·Ð°Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚Ñ– Ð·Ð¼Ñ–Ð½Ð½Ð¸Ñ…:

```R
res <- cor.mtest(mtcars, conf.level = .95)

corrplot(
  M,
  p.mat = res$p, 
  sig.level = .05,
  order = "hclust", 
  addrect = 3
)
```
![corrplot](https://github.com/Sky-Nik/data-analysis/blob/master/labs/lab-2/corrplot.png)

Óæå çàðàç áà÷èìî ùî ì³æ âàãîþ `wt` ³ õîäîì íà îäèíèöþ ïàëèâà `mpg` º îáåðíåíà çàëåæí³ñòü, ïðè÷îìó íàéñèëüí³øà (àáî îäíà ç òàêèõ) ñåðåä âñ³õ ïàð îçíàê (çì³ííèõ). 

Ï³äòâåðäèìî íàø³ âèñíîâêè çà äîïîìîãîþ êîåô³ö³ºíò³â êîðåëÿö³¿ (ïðè öüîìó ì³í³ìàëíüî ïîãðàºìîñÿ ç àëüòåðíàòèâàìè ³ ð³âíåì çíà÷óùîñò³, ïðîñòî äëÿ äåìîíñòðàö³¿ ìîæëèâîñòåé ôóíêö³¿ `cor.test()`):

* Ï³ðñîíà:
```R
cor.test(
  mtcars$mpg, 
  mtcars$wt,
  alternative = "two.sided",
  method = "pearson",
  conf.level = 0.95
)$estimate  # -0.8676594 
```
* Êåíäåëà:
```R
cor.test(
  mtcars$mpg, 
  mtcars$wt,
  alternative = "greater",
  method = "kendall",
  conf.level = 0.9,
  exact = FALSE
)$estimate  # -0.7278321
```
* ³ Ñï³ðìåíà:
```R
cor.test(
  mtcars$mpg, 
  mtcars$wt,
  alternative = "less",
  method = "spearman",
  conf.level = 0.8,
  exact = FALSE
)$estimate  # -0.886422
```
Ñïðàâä³ áà÷èìî ñóòòºâó çâîðîòíþ çàëåæí³ñòü.
